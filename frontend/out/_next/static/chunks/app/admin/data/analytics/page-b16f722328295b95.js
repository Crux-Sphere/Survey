(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4847],{7171:function(e,t,n){Promise.resolve().then(n.bind(n,27817))},16463:function(e,t,n){"use strict";var s=n(71169);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},27817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var s=n(57437),r=n(824),a=n(76965),c=n(81382),i=n(61316),o=n(60274),l=n(16463),u=n(2265),d=n(41942),p=function(e){let{question:t,onChartTypeChange:n}=e;return(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,s.jsx)(d.ffH,{className:"cursor-pointer"}),t]}),(0,s.jsxs)("div",{className:"flex space-x-5",children:[(0,s.jsxs)("div",{className:"space-x-1",children:[(0,s.jsx)("label",{className:"text-secondary-300",children:"Chart Type:"}),(0,s.jsxs)("select",{className:"border border-secondary-200 rounded-md p-2 col-span-8 bg-white",id:"chartType",onChange:e=>n(e.target.value),children:[(0,s.jsx)("option",{value:"column",children:"Column"}),(0,s.jsx)("option",{value:"bar",children:"Bar"}),(0,s.jsx)("option",{value:"pie",children:"Pie"}),(0,s.jsx)("option",{value:"line",children:"Line"})]})]}),(0,s.jsx)(a.Z,{className:"px-4 py-2",children:"Pin to Dashboard"}),(0,s.jsxs)("div",{className:"space-x-1",children:[(0,s.jsx)("label",{className:"text-secondary-300",children:"Exclude in PDF:"}),(0,s.jsxs)("select",{className:"border border-secondary-200 rounded-md p-2 col-span-8 bg-white",id:"excludeInPDF",children:[(0,s.jsx)("option",{value:"no",children:"No"}),(0,s.jsx)("option",{value:"yes",children:"Yes"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.Z,{className:"px-4 py-2",children:"Export"}),(0,s.jsx)(a.Z,{className:"px-2 py-2",children:"âŒ„"})]})]})]})},x=n(37346),h=n(55211);h.kL.register(h.uw,h.f$,h.ZL,h.Dx,h.u,h.De,h.qi,h.od,h.jn);var m=function(e){let{responses:t,chartType:n}=e;console.log(n);let r={labels:t.map(e=>e.response_value),datasets:[{data:t.map(e=>e.count),backgroundColor:["#EF9595","#EFB495","#EFD595","#EBEF95","#A5DD9B","#BB9AB1","#EECEB9"],borderColor:"line"===n?"#EF9595":"",borderWidth:"line"===n?2:0}]},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:"pie"===n}},scales:{x:{display:"pie"!==n,ticks:{autoSkip:!1,maxRotation:0,minRotation:0}},y:{display:"pie"!==n,beginAtZero:!0}},barThickness:40};return(0,s.jsx)("div",{className:"h-[30vh] w-[70vw]",children:"bar"===n?(0,s.jsx)(x.$Q,{data:r,options:{...a,indexAxis:"x"}}):"column"===n?(0,s.jsx)(x.$Q,{data:r,options:{...a,indexAxis:"y"}}):"pie"===n?(0,s.jsx)(x.by,{data:r,options:a}):"line"===n?(0,s.jsx)(x.x1,{data:r,options:a}):void 0})},y=function(e){let{questionTitle:t,responses:n,totalResponses:r}=e,[a,c]=(0,u.useState)("column");return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full bg-white p-5 mb-5 rounded-lg gap-4",children:[(0,s.jsx)(p,{question:t,onChartTypeChange:c}),(0,s.jsx)("div",{className:"flex justify-center ",children:(0,s.jsx)(m,{responses:n,chartType:a})}),(0,s.jsxs)("table",{className:"bg-white border border-gray-300",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"py-2 px-4 border-b"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b text-center",children:"Responses"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b text-center",children:"Percent"})]})}),(0,s.jsxs)("tbody",{children:[n.map((e,t)=>{let n=(100*e.count/r).toFixed(2);return(0,s.jsxs)("tr",{className:t%2==0?"bg-gray-50":"bg-white",children:[(0,s.jsx)("td",{className:"py-2 px-4 border-b",children:e.response_value}),(0,s.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e.count}),(0,s.jsxs)("td",{className:"py-2 px-4 border-b text-center",children:[n,"%"]})]},t)}),(0,s.jsxs)("tr",{className:"font-bold",children:[(0,s.jsx)("td",{className:"py-2 px-4 border-b",children:"Total"}),(0,s.jsx)("td",{className:"py-2 px-4 border-b text-center",children:r}),(0,s.jsx)("td",{className:"py-2 px-4 border-b text-center",children:"100.00%"})]})]})]})]})};function f(){let[e,t]=(0,u.useState)([]),n=(0,l.useSearchParams)().get("survey_id"),[d,p]=(0,u.useState)(null),[x,h]=(0,u.useState)(null);async function m(){let e=await (0,o.a2)({survey_id:n});console.log("response is---->",e.data),e.success&&t(e.data)}return(0,u.useEffect)(()=>{m()},[]),(0,s.jsxs)("div",{className:"w-full bg-[#ECF0FA]  font-medium ",children:[(0,s.jsxs)("nav",{className:"h-16 w-full py-3 px-8 flex justify-between font-semibold ",children:[(0,s.jsx)("div",{className:"text-my-gray-200 items-center my-auto",children:(0,s.jsxs)("p",{className:"text-sm ",children:["Analytics: ","My Survey"]})}),(0,s.jsxs)("div",{className:"flex space-x-2 text-black text-base",children:[(0,s.jsx)(c.Z,{className:"px-4 py-2",children:"Response"}),(0,s.jsx)(a.Z,{className:"px-4 py-2",children:"Analytics"}),(0,s.jsx)(c.Z,{className:"px-4 py-2",children:"Daily Report"}),(0,s.jsx)(c.Z,{className:"px-4 py-2",children:"Summary Report"}),(0,s.jsx)(c.Z,{className:"px-4 py-2",children:"Spatial Report"}),(0,s.jsx)(c.Z,{className:"px-4 py-2",children:"Scoring Report"})]})]}),(0,s.jsx)("div",{className:"p-5 font-semibold text-sm text-my-gray-200",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg flex justify-between items-center px-4",children:[(0,s.jsx)("div",{className:"p-2 h-16 flex items-center rounded-lg",children:(0,s.jsx)(i.Z,{startDate:d,endDate:x,setStartDate:p,setEndDate:h})}),(0,s.jsxs)("div",{className:"flex space-x-2 items-center text-xs",children:[(0,s.jsx)(r.Z,{className:"p-2 h-[50px] py-1 ",children:"Filters"}),(0,s.jsx)(r.Z,{className:"p-2 h-[50px] py-1 ",children:"Chat Visibility"}),(0,s.jsx)(a.Z,{className:"p-2 h-[50px] py-1 ",children:"Export All"}),(0,s.jsx)(a.Z,{className:"p-2 h-[50px]  pt-1 ",children:"âŒ„"})]})]})}),(0,s.jsx)("div",{className:"p-5 text-sm text-my-gray-200",children:e&&e.length>0&&e.map((e,t)=>(0,s.jsx)(y,{questionTitle:e.question,responses:e.responses,totalResponses:e.total_responses},t))})]})}var b=()=>(0,s.jsx)(u.Suspense,{children:(0,s.jsx)(f,{})})},824:function(e,t,n){"use strict";var s=n(57437);n(2265);var r=n(96164);t.Z=function(e){let{children:t,className:n,...a}=e;return(0,s.jsx)("button",{...a,className:(0,r.m6)("border border-primary-300 px-4 py-2 rounded-md text-primary-300 hover:text-white hover:bg-primary-300",n),children:t})}},76965:function(e,t,n){"use strict";var s=n(57437);n(2265);var r=n(96164);t.Z=function(e){let{children:t,className:n,onClick:a,...c}=e;return(0,s.jsx)("button",{...c,onClick:a,className:(0,r.m6)("border text-white bg-primary-300 px-4 py-2 rounded-md",n),children:t})}},81382:function(e,t,n){"use strict";var s=n(57437);n(2265);var r=n(96164);t.Z=function(e){let{children:t,className:n,onClick:a,...c}=e;return(0,s.jsx)("button",{...c,onClick:a,className:(0,r.m6)("border text-black bg-[#E0DCDC] rounded-lg px-4 py-2",n),children:t})}},61316:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var s=n(57437),r=n(76235),a=n(36463),c=n.n(a),i=n(28196),o=n(96164),l=n(66648);n(54575);var u=function(e){let{startDate:t,setStartDate:n,endDate:a,setEndDate:u,className:d}=e,p=e=>e?(0,r.WU)(e,"dd-MMM-yyyy"):"",x=e=>{if(!e)return null;let t=new Date(e);return t.setHours(0,0,0,0),t};return(0,s.jsxs)("div",{className:(0,o.m6)("w-fit flex font-medium text-lg px-4 py-2 items-center space-x-2 rounded-md focus:outline-none cursor-pointer",d),children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.default,{src:"/_next/static/media/survey_analytics_calender.a8f69bf6.png",alt:"calender",height:24,width:24})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c(),{selected:t,onChange:e=>n(x(e)),dateFormat:"dd.MM.yyyy",scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,customInput:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"text",value:t?p(t):"",onChange:e=>{console.log("inside input")},placeholder:"Select start",className:"my-2 w-[120px] text-center outline-none font-normal text-sm"})})}),(0,s.jsx)(i.OEZ,{className:"inline-block pt-1 text-2xl"}),(0,s.jsx)(c(),{selected:a,onChange:e=>u(x(e)),dateFormat:"dd.MM.yyyy",scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,customInput:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"text",value:a?p(a):"",onChange:e=>{console.log("inside input")},placeholder:"Select end",className:"my-2 w-[120px] text-center outline-none font-normal text-sm"})})})]})]})}},60274:function(e,t,n){"use strict";n.d(t,{Gn:function(){return u},LA:function(){return l},T0:function(){return d},Vb:function(){return a},a2:function(){return o},ez:function(){return c},tB:function(){return i}});var s=n(1633),r=n(38472);let a=async e=>{try{let t={method:"POST",url:"".concat(s.M6,"/").concat(s.TK),headers:{"Content-Type":"application/json"},data:e},n=await r.Z.request(t);return console.log(n),n.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},c=async e=>{try{let t={method:"POST",url:"".concat(s.M6,"/").concat(s.Dy,"?_id=").concat(e._id),headers:{"Content-Type":"application/json"},data:e.formData};return(await r.Z.request(t)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},i=async e=>{try{let t=e.page||1,n=e.limit||10,a=e.filter||"",c=e.created_by,i=e.sortBy,o=e.sortOrder,l=e.published;"published"===e.published?l=!0:"unpublished"===e.published?l=!1:"all"===e.published&&(l=void 0);let u={method:"GET",url:"".concat(s.M6,"/").concat(s.it,"?filter=").concat(a,"&page=").concat(t,"&limit=").concat(n,"&sortBy=").concat(i,"&sortOrder=").concat(o,"&published=").concat(l,"&created_by=").concat(c)},d=await r.Z.request(u);return console.log(d),d.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},o=async e=>{try{e.page,e.limit,e.filter,e.created_by,e.sortBy,e.sortOrder,e.published,"published"===e.published||"unpublished"===e.published||e.published;let t={method:"GET",url:"".concat(s.M6,"/").concat(s.VJ),params:{survey_id:e.survey_id}},n=await r.Z.request(t);return console.log(n),n.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},l=async e=>{try{let t={method:"GET",url:"".concat(s.M6,"/").concat(s.A5,"?_id=").concat(e._id)};return(await r.Z.request(t)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},u=async e=>{try{let t={method:"POST",url:"".concat(s.M6,"/").concat(s.dt),data:e},n=await r.Z.request(t);return console.log(n),n.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},d=async e=>{try{let t={method:"GET",url:"".concat(s.M6,"/").concat(s.O1),params:e},n=await r.Z.request(t);return console.log(n),n.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}}},1633:function(e,t,n){"use strict";n.d(t,{A5:function(){return j},Dy:function(){return b},EK:function(){return l},HA:function(){return S},M6:function(){return s},ND:function(){return R},Ny:function(){return P},O1:function(){return N},Pn:function(){return p},SR:function(){return a},TK:function(){return f},Tp:function(){return r},Tv:function(){return c},UN:function(){return m},UY:function(){return U},VH:function(){return W},VJ:function(){return C},Yn:function(){return h},d1:function(){return O},dt:function(){return g},ht:function(){return x},it:function(){return v},jC:function(){return Z},jV:function(){return _},mW:function(){return T},n$:function(){return D},nM:function(){return B},q6:function(){return M},qJ:function(){return y},ql:function(){return k},rO:function(){return E},rd:function(){return i},sC:function(){return o},tm:function(){return u},tt:function(){return d},vx:function(){return w},we:function(){return q},x4:function(){return A},xD:function(){return F}});let s="https://survey-3uf0.onrender.com",r="api/user/getUser",a="api/user/getAllUsers",c="api/user/addUsers",i="api/user/addMultipleUsers",o="api/user/updateUser",l="api/user/updateUsers",u="api/chatroom/getAllChatsData",d="api/user/getAllKaryakarta",p="api/user/getKaryakarta",x="api/user/createKaryakarta",h="api/user/updateKaryakarta",m="api/user/getPannaPramukh",y="api/user/updateMultipleKaryakarta",f="api/survey/saveSurvey",b="api/survey/updateSurvey",j="api/survey/getSurvey",g="api/survey/deleteSurvey",v="api/survey/getAllSurveys",N="api/survey/getSurveysByAcAndBooth",w="api/response/saveResponses",S="api/response/getAllSurveyResponses",Z="api/response/getAllResponses",C="api/response/getSurveyResponseStats",D="api/response/getGroupedByFamily",E=["Contact Form","Address"],A="api/auth/login",_="api/auth/forgotPassword",M="api/auth/resetPassword",P="api/role/allRoles",T="api/role/roles",k="api/role/create",R="api/role/update",W="api/role/delete",B="api/todo/create",F="api/todo/todo",q="api/todo/todos",O="api/todo/update",U="api/todo/delete"}},function(e){e.O(0,[5223,7699,614,1544,7674,8472,6164,4049,8143,8088,5746,2971,7023,1744],function(){return e(e.s=7171)}),_N_E=e.O()}]);