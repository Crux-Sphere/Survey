(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7135],{3265:function(e,t,s){Promise.resolve().then(s.bind(s,21841))},21841:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var n=s(57437),r=s(2265),l=s(824),a=s(16463),c=s(7583),i=s.n(c);let o={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"0",border:"none",borderRadius:"16px"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:9999}};i().setAppElement("body");var u=function(e){let{children:t,open:s,closeModal:r}=e;return(0,n.jsx)(i(),{isOpen:s,onRequestClose:r,style:o,contentLabel:"Example Modal",children:t})},d=function(){let[e,t]=(0,r.useState)(!1),[s,c]=(0,r.useState)(""),i=(0,a.useRouter)(),o=()=>t(!1);return(0,n.jsxs)("header",{className:"top-0 left-0 z-20 w-full h-16",children:[(0,n.jsxs)("div",{className:"h-16 w-full py-3 px-8 flex justify-between ",children:[(0,n.jsx)("h3",{className:"text-secondary-300 text-2xl",children:"Surveys"}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsxs)(l.Z,{onClick:()=>t(!0),className:"bg-white font-semibold",children:[" ","+ Create survey"]})})]}),(0,n.jsx)(u,{open:e,closeModal:o,children:(0,n.jsxs)("div",{className:"min-w-[662px] h-[337px] flex flex-col",children:[(0,n.jsx)("div",{className:"relative z-10 text-primary-300 px-8 py-4 font-semibold border-b border-secondary-300 w-full shadow-md",children:"Create surveys"}),(0,n.jsxs)("form",{className:"w-full h-full flex flex-col gap-10 justify-center items-center",children:[(0,n.jsxs)("div",{className:"flex items-center gap-10",children:[(0,n.jsx)("label",{children:"Name"}),(0,n.jsx)("input",{onChange:e=>c(e.target.value),value:s,className:"flex items-center border border-secondary-200 rounded-md px-8 py-3 w-[185px] h-[35px]",type:"text",placeholder:"name"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-10",children:[(0,n.jsx)(l.Z,{onClick:o,type:"button",className:"border-secondary-200",children:"Cancel"}),(0,n.jsx)("button",{className:"px-6 py-2 bg-primary-300 text-white rounded-md",type:"button",onClick:()=>i.push("/admin/surveys/create?name=".concat(encodeURIComponent(s))),children:"Create survey"})]})]})]})})]})},h=s(76965),p=s(66648),x=s(43781),m=s(60274),f=s(95650),y=s(41942),b=s(16356),j=s(88726),g=s(80106),v=s(79005),N=function(e){let{queryParams:t}=e,[s,l]=(0,r.useState)([]),[c,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[p,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),[A,D]=(0,r.useState)(null),[k,Z]=(0,r.useState)(!1),P=(0,a.useRouter)();async function F(){(await (0,m.Gn)({id:w,created_by:"rohitchand490@gmail.com"})).success?(M(),N(!1),d(null),j.ZP.success("Survey deleted successfully")):j.ZP.error("Failed to delete survey")}async function E(){(await (0,m.ez)({_id:C,formData:{published:!A,created_by:"rohitchand490@gmail.com"}})).success?(M(),Z(!1),_(null),D(null),j.ZP.success("Survey ".concat(A?"Unpublished":"Published"," successfully"))):j.ZP.error("Failed to Publish survey")}async function M(){i(!0),l((await (0,m.tB)(t)).survey),i(!1)}(0,r.useEffect)(()=>{M()},[t]);let O=e=>{d(t=>t===e?null:e)},B=e=>{D(e.published),_(e._id),Z(!0)};return(0,n.jsxs)("div",{className:"w-full px-8 py-3 text-sm",children:[(0,n.jsxs)("div",{className:"grid grid-cols-8 text-white font-semibold bg-blue-500 px-8 py-[16px] rounded-tl-2xl rounded-tr-2xl border border-secondary-200",children:[(0,n.jsx)("p",{className:"col-span-2",children:"All surveys"}),(0,n.jsx)("p",{className:"col-span-2",children:"Total responses"}),(0,n.jsx)("p",{className:"col-span-2",children:"Date created"}),(0,n.jsx)("p",{className:"col-span-2",children:"Status"})]}),c&&(0,n.jsx)(g.Z,{className:"h-[40vh] w-full flex justify-center items-center text-primary-300"}),!c&&s&&s.length>0?s.map((e,t)=>(0,n.jsxs)("div",{className:"grid grid-cols-8 px-8 py-[16px] border-l border-r border-b border-secondary-200 w-full bg-white",children:[(0,n.jsx)("p",{onClick:()=>P.push("/admin/surveys/edit?survey_id=".concat(e._id)),className:"col-span-2 cursor-pointer underline",children:e.name}),(0,n.jsx)("p",{className:"col-span-2 pl-8",children:"0"}),(0,n.jsx)("p",{className:"col-span-2",children:(0,f.p)(e.createdAt)}),(0,n.jsxs)("div",{className:"col-span-2 flex items-center justify-between w-full relative",children:[(0,n.jsx)(v.Z,{onChange:()=>B(e),checked:e.published,onColor:"#4CAF50",offColor:"#DDDDDD",uncheckedIcon:!1,checkedIcon:!1,className:"transition-switch duration-300 ease-in-out"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("button",{onClick:()=>{S(e._id),O(e._id)},children:(0,n.jsx)(x.FQA,{})}),o===e._id&&(0,n.jsxs)("div",{className:"absolute right-0 top-8 h-auto w-48 bg-white shadow-lg border rounded-md py-2 z-10",children:[(0,n.jsxs)("button",{onClick:()=>P.push("/admin/surveys/edit?survey_id=".concat(e._id)),className:"flex gap-2 items-center px-4 py-2 hover:bg-gray-100 cursor-pointer w-full",children:[(0,n.jsx)(y.ffH,{})," Edit"]}),(0,n.jsxs)("button",{className:"flex gap-2 items-center px-4 py-2 hover:bg-gray-100 cursor-pointer w-full",children:[(0,n.jsx)(y.BKo,{})," Assign to user"]}),(0,n.jsxs)("button",{onClick:()=>{d(null),N(!0)},className:"flex gap-2 items-center px-4 py-2 hover:bg-gray-100 cursor-pointer w-full",children:[(0,n.jsx)(b.F1H,{})," Delete"]})]})]})]})]},t)):!c&&!s&&(0,n.jsx)("p",{className:"w-full h-20 flex justify-center items-center font-semibold text-secondary-300",children:"No surveys"}),(0,n.jsx)(u,{open:k,closeModal:()=>{Z(!1),_(null),D(null)},children:(0,n.jsxs)("div",{className:"flex flex-col h-[40vh] w-[40vw] justify-center items-center gap-10 ",children:[(0,n.jsxs)("h1",{className:"text-xl",children:["Do you want to ",A?"Unpublish":"Publish"," this survey?"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(h.Z,{onClick:E,className:"w-40",children:A?"Unpublish":"Publish"}),(0,n.jsx)(h.Z,{onClick:()=>{Z(!1),_(null),D(null)},className:"w-40",children:"No"})]})]})}),(0,n.jsx)(u,{open:p,closeModal:()=>{N(!1),d(null),S(null)},children:(0,n.jsxs)("div",{className:"flex flex-col h-[40vh] w-[40vw] justify-center items-center gap-10 ",children:[(0,n.jsx)("h1",{className:"text-xl",children:"Are you sure you want to delete this survey?"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(h.Z,{onClick:F,className:"w-40",children:"Yes"}),(0,n.jsx)(h.Z,{onClick:()=>{N(!1),d(null),S(null)},className:"w-40",children:"No"})]})]})})]})};let w={page:1,limit:10,sortBy:"createdAt",sortOrder:"desc",published:"all",created_by:"rohitchand490@gmail.com",filter:""};var S=function(){let[e,t]=(0,r.useState)(w),[s,l]=(0,r.useState)(""),[a,c]=(0,r.useState)("all"),[i,o]=(0,r.useState)("dateDesc");return(0,r.useEffect)(()=>{},[e]),(0,n.jsxs)("section",{className:"w-full  bg-[#ECF0FA]",children:[(0,n.jsx)(d,{}),(0,n.jsx)("div",{className:"p-3 text-sm text-my-gray-200 bg-white mx-8 rounded-xl my-2",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("input",{className:"w-[387px] h-[41px] px-4 py-[10px] border border-secondary-200 rounded-md focus:outline-none text-[14px] text-secondary-300",placeholder:"Search Surveys here",value:s,onChange:e=>l(e.target.value)}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)("div",{className:"flex h-10 items-center space-x-2 text-secondary-300 font-semibold",children:[(0,n.jsx)("p",{className:"",children:"Filter By:"}),(0,n.jsx)("div",{className:"rounded-md py-2 px-2 justify-between border border-secondary-200 bg-white",children:(0,n.jsxs)("select",{name:"filterby",className:"w-40 bg-white  focus:outline-none",id:"filterby",value:a,onChange:e=>c(e.target.value),children:[(0,n.jsx)("option",{value:"all",children:"All"}),(0,n.jsx)("option",{value:"published",children:"Published"}),(0,n.jsx)("option",{value:"unpublished",children:"Unpublished"})]})})]}),(0,n.jsxs)("div",{className:"flex h-10 items-center space-x-2 mr-8 text-secondary-300 font-semibold",children:[(0,n.jsx)("p",{className:"",children:"Sort By:"}),(0,n.jsx)("div",{className:"rounded-md py-2 px-2 justify-between border border-secondary-200 bg-white",children:(0,n.jsxs)("select",{name:"sortby",className:"w-40 bg-white focus:outline-none",id:"sortby",value:i,onChange:e=>o(e.target.value),children:[(0,n.jsx)("option",{value:"nameAsc",children:"Name ASC"}),(0,n.jsx)("option",{value:"nameDesc",children:"Name DESC"}),(0,n.jsx)("option",{value:"dateDesc",children:"Date DESC"}),(0,n.jsx)("option",{value:"dateAsc",children:"Date ASC"})]})})]}),(0,n.jsxs)(h.Z,{className:"text-[14px] font-semibold flex gap-2 items-center justify-center",onClick:()=>{t(e=>({...e,filter:s,published:a,sortBy:i.includes("name")?"name":"createdAt",sortOrder:i.includes("Asc")?"asc":"desc",page:1}))},children:[(0,n.jsx)(p.default,{src:"/_next/static/media/Filter.bcc39a0d.png",alt:"filter icon",height:24,width:24}),(0,n.jsx)("p",{children:"Apply filters"})]}),(0,n.jsx)(h.Z,{className:"text-[14px] font-semibold flex gap-2 items-center justify-center",onClick:()=>{l(""),c("all"),o("dateDesc"),t(()=>w)},children:(0,n.jsx)("p",{children:"Clear Filters"})})]})]})}),(0,n.jsx)(N,{queryParams:e})]})}},80106:function(e,t,s){"use strict";var n=s(57437),r=s(94057);t.Z=function(e){let{className:t}=e;return(0,n.jsx)("div",{className:t,children:(0,n.jsx)(r.Z,{color:"#477BFF"})})}},824:function(e,t,s){"use strict";var n=s(57437);s(2265);var r=s(96164);t.Z=function(e){let{children:t,className:s,...l}=e;return(0,n.jsx)("button",{...l,className:(0,r.m6)("border border-primary-300 px-4 py-2 rounded-md text-primary-300",s),children:t})}},76965:function(e,t,s){"use strict";var n=s(57437);s(2265);var r=s(96164);t.Z=function(e){let{children:t,className:s,onClick:l}=e;return(0,n.jsx)("button",{onClick:l,className:(0,r.m6)("border text-white bg-primary-300 px-4 py-2 rounded-md",s),children:t})}},60274:function(e,t,s){"use strict";s.d(t,{Gn:function(){return o},LA:function(){return i},Vb:function(){return l},ez:function(){return a},tB:function(){return c}});var n=s(1633),r=s(38472);let l=async e=>{try{let t={method:"POST",url:"".concat(n.M6,"/").concat(n.TK),data:e};return(await r.Z.request(t)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},a=async e=>{try{let t={method:"POST",url:"".concat(n.M6,"/").concat(n.Dy,"?_id=").concat(e._id),data:e.formData};return(await r.Z.request(t)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},c=async e=>{try{let t=e.page||1,s=e.limit||10,l=e.filter||"",a=e.created_by,c=e.sortBy,i=e.sortOrder,o=e.published;"published"===e.published?o=!0:"unpublished"===e.published?o=!1:"all"===e.published&&(o=void 0);let u={method:"GET",url:"".concat(n.M6,"/").concat(n.it,"?filter=").concat(l,"&page=").concat(t,"&limit=").concat(s,"&sortBy=").concat(c,"&sortOrder=").concat(i,"&published=").concat(o,"&created_by=").concat(a)},d=await r.Z.request(u);return console.log(d),d.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},i=async e=>{try{let t={method:"GET",url:"".concat(n.M6,"/").concat(n.A5,"?_id=").concat(e._id)},s=await r.Z.request(t);return console.log(s),s.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},o=async e=>{try{let t={method:"POST",url:"".concat(n.M6,"/").concat(n.dt),data:e},s=await r.Z.request(t);return console.log(s),s.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}}},95650:function(e,t,s){"use strict";function n(e){let t=new Date(e),s=String(t.getDate()).padStart(2,"0"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getFullYear();return"".concat(s,"-").concat(n,"-").concat(r)}function r(){let e=localStorage.getItem("jwt_token");return e?JSON.parse(atob(e.split(".")[1])):null}s.d(t,{a:function(){return r},p:function(){return n}})},1633:function(e,t,s){"use strict";s.d(t,{A5:function(){return o},Dy:function(){return i},M6:function(){return n},SR:function(){return l},TK:function(){return c},Tp:function(){return r},Tv:function(){return a},dt:function(){return u},it:function(){return d},jV:function(){return x},q6:function(){return m},rO:function(){return h},x4:function(){return p}});let n="https://survey-3uf0.onrender.com",r="api/user/getUser",l="api/user/getAllUsers",a="api/user/addUsers",c="api/survey/saveSurvey",i="api/survey/updateSurvey",o="api/survey/getSurvey",u="api/survey/deleteSurvey",d="api/survey/getAllSurveys",h=["Contact Form","Address"],p="api/auth/login",x="api/auth/forgotPassword",m="api/auth/resetPassword"}},function(e){e.O(0,[7699,6051,1779,9236,6164,8726,6648,7583,3533,2971,7023,1744],function(){return e(e.s=3265)}),_N_E=e.O()}]);