(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797],{60466:function(e,s,t){Promise.resolve().then(t.bind(t,27360))},27360:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var n=t(57437),r=t(16463),a=function(e){let{id:s,created_by:t,name:a}=e,c=(0,r.usePathname)(),o=(0,r.useRouter)();return(0,n.jsx)("header",{className:"w-full h-16 border-2",children:(0,n.jsxs)("div",{className:"bg-secondary-100 h-full w-full px-8 py-3 flex justify-between items-center",children:[(0,n.jsxs)("h3",{className:"text-secondary-300 text-[14px] font-semibold",children:["Edit survey : ",a," "]}),(0,n.jsxs)("div",{className:" flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>o.push("/admin/surveys/questions?id=".concat(s,"&created_by=").concat(t)),className:"border text-black bg-primary-300 px-4 py-2 rounded-md text-[14px] font-sem font-semibold ".concat("/admin/surveys/questions"===c?"text-white":"bg-secondary-200"),children:"Questionnaire"}),(0,n.jsx)("button",{onClick:()=>o.push("/admin/surveys/resequence"),className:"border text-black bg-primary-300 px-4 py-2 rounded-md text-[14px] font-sem font-semibold ".concat("/admin/surveys/resequence"===c?"text-white":"bg-secondary-200"),children:"users"})]})]})})},c=t(76965),o=t(60274),l=t(2265),d=t(39343),i=t(88726);function u(){let[e,s]=(0,l.useState)([]),[t,u]=(0,l.useState)(!1),m=(0,r.useSearchParams)().get("survey_id"),{register:p,handleSubmit:x,setValue:h,formState:{errors:f,isSubmitting:y}}=(0,d.cI)({defaultValues:e});async function g(){let e=await (0,o.LA)({_id:m});console.log(e),e.success?s(e.data[0]):i.ZP.error("something went wrong")}async function b(e){let s=new FormData;for(let t in e)"welcome_image"!==t&&"thankyou_image"!==t&&s.append(t,null==e[t]?"":e[t]);e.welcome_image&&e.welcome_image[0]&&s.append("welcome_image",e.welcome_image[0]),e.thankyou_image&&e.thankyou_image[0]&&s.append("thankyou_image",e.thankyou_image[0]),s.append("created_by","rohitchand490@gmail.com"),u(!0);try{let e=await (0,o.ez)({_id:m,formData:s});console.log(e),e.success?i.ZP.success("Survey updated successfully!"):i.ZP.error("Failed to update survey.")}catch(e){i.ZP.error("Something went wrong.")}finally{u(!1)}}return(0,l.useEffect)(()=>{g()},[]),(0,l.useEffect)(()=>{e&&Object.keys(e).forEach(s=>{h(s,e[s])})},[e,h]),(0,n.jsx)("main",{className:"w-full",children:(0,n.jsxs)("div",{className:"w-full flex flex-col gap-5",children:[(0,n.jsx)(a,{id:m||"",created_by:e.created_by,name:e.name}),(0,n.jsxs)("form",{className:"grid grid-cols-2 m-10",onSubmit:x(b),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Name"}),(0,n.jsx)("input",{value:e.name||"",disabled:!0,...p("name"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Header text"}),(0,n.jsx)("input",{...p("header_text"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Welcome image"}),(0,n.jsx)("div",{className:"col-span-2",children:(0,n.jsxs)("label",{className:"flex items-center justify-center w-[352px] h-[41px] rounded-md cursor-pointer hover:bg-secondary-50",children:[(0,n.jsxs)("div",{className:"flex gap-2 bg-white h-full w-full",children:[(0,n.jsx)("div",{className:"h-full w-full bg-secondary-200 rounded-md"}),(0,n.jsx)("p",{className:"border border-secondary-200 text-secondary-300 h-full w-[35%] rounded-md flex items-center justify-center text-[14px]",children:"Choose file"})]}),(0,n.jsx)("input",{...p("welcome_image"),type:"file",className:"hidden"})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Thank you image"}),(0,n.jsx)("div",{className:"col-span-2",children:(0,n.jsxs)("label",{className:"flex items-center justify-center w-[352px] h-[41px] rounded-md cursor-pointer hover:bg-secondary-50",children:[(0,n.jsxs)("div",{className:"flex gap-2 bg-white h-full w-full",children:[(0,n.jsx)("div",{className:"h-full w-full bg-secondary-200 rounded-md"}),(0,n.jsx)("p",{className:"border border-secondary-200 text-secondary-300 h-full w-[35%] rounded-md flex items-center justify-center text-[14px]",children:"Choose file"})]}),(0,n.jsx)("input",{...p("thankyou_image"),type:"file",className:"hidden"})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Time duration"}),(0,n.jsx)("input",{...p("thank_time_duration"),type:"number",className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Access pin"}),(0,n.jsx)("input",{...p("access_pin"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3",children:[(0,n.jsx)("label",{className:"text-secondary-300 font-medium",children:"Background location capture"}),(0,n.jsx)("input",{type:"number",...p("background_location_capture"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]})]}),(0,n.jsxs)("div",{className:"col-span-2 flex gap-4 justify-center mt-[10%]",children:[(0,n.jsx)(c.Z,{className:"px-4 py-[10px] w-[95px]",children:"Update"}),(0,n.jsx)("button",{type:"button",className:"px-4 py-[10px] w-[95px] border border-secondary-200 rounded-md text-secondary-300",children:"Cancel"})]})]})]})})}var m=()=>(0,n.jsx)(l.Suspense,{children:(0,n.jsx)(u,{})})},76965:function(e,s,t){"use strict";var n=t(57437);t(2265);var r=t(96164);s.Z=function(e){let{children:s,className:t,onClick:a}=e;return(0,n.jsx)("button",{onClick:a,className:(0,r.m6)("border text-white bg-primary-300 px-4 py-2 rounded-md",t),children:s})}},60274:function(e,s,t){"use strict";t.d(s,{Gn:function(){return d},LA:function(){return l},Vb:function(){return a},ez:function(){return c},tB:function(){return o}});var n=t(1633),r=t(38472);let a=async e=>{try{let s={method:"POST",url:"".concat(n.M6,"/").concat(n.TK),data:e};return(await r.Z.request(s)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},c=async e=>{try{let s={method:"POST",url:"".concat(n.M6,"/").concat(n.Dy,"?_id=").concat(e._id),data:e.formData};return(await r.Z.request(s)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},o=async e=>{try{let s=e.page||1,t=e.limit||10,a=e.filter||"",c=e.created_by,o=e.sortBy,l=e.sortOrder,d=e.published;"published"===e.published?d=!0:"unpublished"===e.published?d=!1:"all"===e.published&&(d=void 0);let i={method:"GET",url:"".concat(n.M6,"/").concat(n.it,"?filter=").concat(a,"&page=").concat(s,"&limit=").concat(t,"&sortBy=").concat(o,"&sortOrder=").concat(l,"&published=").concat(d,"&created_by=").concat(c)},u=await r.Z.request(i);return console.log(u),u.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},l=async e=>{try{let s={method:"GET",url:"".concat(n.M6,"/").concat(n.A5,"?_id=").concat(e._id)},t=await r.Z.request(s);return console.log(t),t.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},d=async e=>{try{let s={method:"POST",url:"".concat(n.M6,"/").concat(n.dt),data:e},t=await r.Z.request(s);return console.log(t),t.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}}},1633:function(e,s,t){"use strict";t.d(s,{A5:function(){return d},Dy:function(){return l},M6:function(){return n},SR:function(){return a},TK:function(){return o},Tp:function(){return r},Tv:function(){return c},dt:function(){return i},it:function(){return u},jV:function(){return x},q6:function(){return h},rO:function(){return m},x4:function(){return p}});let n="https://survey-3uf0.onrender.com",r="api/user/getUser",a="api/user/getAllUsers",c="api/user/addUsers",o="api/survey/saveSurvey",l="api/survey/updateSurvey",d="api/survey/getSurvey",i="api/survey/deleteSurvey",u="api/survey/getAllSurveys",m=["Contact Form","Address"],p="api/auth/login",x="api/auth/forgotPassword",h="api/auth/resetPassword"}},function(e){e.O(0,[9236,6164,8726,9343,2971,7023,1744],function(){return e(e.s=60466)}),_N_E=e.O()}]);