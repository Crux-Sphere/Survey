(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{466:function(e,s,n){Promise.resolve().then(n.bind(n,7360))},7360:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return m}});var t=n(7437),r=n(6463),a=function(e){let{id:s,created_by:n,name:a}=e,c=(0,r.usePathname)(),o=(0,r.useRouter)();return(0,t.jsx)("header",{className:"w-full h-16 border-2",children:(0,t.jsxs)("div",{className:"bg-secondary-100 h-full w-full px-8 py-3 flex justify-between items-center",children:[(0,t.jsxs)("h3",{className:"text-secondary-300 text-[14px] font-semibold",children:["Edit survey : ",a," "]}),(0,t.jsxs)("div",{className:" flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>o.push("/admin/surveys/questions?id=".concat(s,"&created_by=").concat(n)),className:"border text-black bg-primary-300 px-4 py-2 rounded-md text-[14px] font-sem font-semibold ".concat("/admin/surveys/questions"===c?"text-white":"bg-secondary-200"),children:"Questionnaire"}),(0,t.jsx)("button",{onClick:()=>o.push("/admin/surveys/resequence"),className:"border text-black bg-primary-300 px-4 py-2 rounded-md text-[14px] font-sem font-semibold ".concat("/admin/surveys/resequence"===c?"text-white":"bg-secondary-200"),children:"users"})]})]})})},c=n(6965),o=n(274),l=n(2265),d=n(9343),i=n(8726);function u(){let[e,s]=(0,l.useState)([]),[n,u]=(0,l.useState)(!1),m=(0,r.useSearchParams)().get("survey_id"),{register:x,handleSubmit:p,setValue:h,formState:{errors:f,isSubmitting:y}}=(0,d.cI)({defaultValues:e});async function g(){let e=await (0,o.LA)({_id:m});console.log(e),e.success?s(e.data[0]):i.ZP.error("something went wrong")}async function b(e){let s=new FormData;for(let n in e)"welcome_image"!==n&&"thankyou_image"!==n&&s.append(n,null==e[n]?"":e[n]);e.welcome_image&&e.welcome_image[0]&&s.append("welcome_image",e.welcome_image[0]),e.thankyou_image&&e.thankyou_image[0]&&s.append("thankyou_image",e.thankyou_image[0]),s.append("created_by","rohitchand490@gmail.com"),u(!0);try{let e=await (0,o.ez)({_id:m,formData:s});console.log(e),e.success?i.ZP.success("Survey updated successfully!"):i.ZP.error("Failed to update survey.")}catch(e){i.ZP.error("Something went wrong.")}finally{u(!1)}}return(0,l.useEffect)(()=>{g()},[]),(0,l.useEffect)(()=>{e&&Object.keys(e).forEach(s=>{h(s,e[s])})},[e,h]),(0,t.jsx)("main",{className:"w-full",children:(0,t.jsxs)("div",{className:"w-full flex flex-col gap-5",children:[(0,t.jsx)(a,{id:m||"",created_by:e.created_by,name:e.name}),(0,t.jsxs)("form",{className:"grid grid-cols-2 m-10",onSubmit:p(b),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Name"}),(0,t.jsx)("input",{value:e.name||"",disabled:!0,...x("name"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Header text"}),(0,t.jsx)("input",{...x("header_text"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Welcome image"}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsxs)("label",{className:"flex items-center justify-center w-[352px] h-[41px] rounded-md cursor-pointer hover:bg-secondary-50",children:[(0,t.jsxs)("div",{className:"flex gap-2 bg-white h-full w-full",children:[(0,t.jsx)("div",{className:"h-full w-full bg-secondary-200 rounded-md"}),(0,t.jsx)("p",{className:"border border-secondary-200 text-secondary-300 h-full w-[35%] rounded-md flex items-center justify-center text-[14px]",children:"Choose file"})]}),(0,t.jsx)("input",{...x("welcome_image"),type:"file",className:"hidden"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Thank you image"}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsxs)("label",{className:"flex items-center justify-center w-[352px] h-[41px] rounded-md cursor-pointer hover:bg-secondary-50",children:[(0,t.jsxs)("div",{className:"flex gap-2 bg-white h-full w-full",children:[(0,t.jsx)("div",{className:"h-full w-full bg-secondary-200 rounded-md"}),(0,t.jsx)("p",{className:"border border-secondary-200 text-secondary-300 h-full w-[35%] rounded-md flex items-center justify-center text-[14px]",children:"Choose file"})]}),(0,t.jsx)("input",{...x("thankyou_image"),type:"file",className:"hidden"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Time duration"}),(0,t.jsx)("input",{...x("thank_time_duration"),type:"number",className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Access pin"}),(0,t.jsx)("input",{...x("access_pin"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3",children:[(0,t.jsx)("label",{className:"text-secondary-300 font-medium",children:"Background location capture"}),(0,t.jsx)("input",{type:"number",...x("background_location_capture"),className:"col-span-2 w-[352px] h-[41px] border-secondary-200 px-4 py-[10px] focus:outline-none border rounded-md"})]})]}),(0,t.jsxs)("div",{className:"col-span-2 flex gap-4 justify-center mt-[10%]",children:[(0,t.jsx)(c.Z,{className:"px-4 py-[10px] w-[95px]",children:"Update"}),(0,t.jsx)("button",{type:"button",className:"px-4 py-[10px] w-[95px] border border-secondary-200 rounded-md text-secondary-300",children:"Cancel"})]})]})]})})}var m=()=>(0,t.jsx)(l.Suspense,{children:(0,t.jsx)(u,{})})},6965:function(e,s,n){"use strict";var t=n(7437);n(2265);var r=n(6164);s.Z=function(e){let{children:s,className:n,onClick:a}=e;return(0,t.jsx)("button",{onClick:a,className:(0,r.m6)("border text-white bg-primary-300 px-4 py-2 rounded-md",n),children:s})}},274:function(e,s,n){"use strict";n.d(s,{Gn:function(){return d},LA:function(){return l},Vb:function(){return a},ez:function(){return c},tB:function(){return o}});var t=n(1633),r=n(8472);let a=async e=>{try{let s={method:"POST",url:"".concat(t.M6,"/").concat(t.TK),data:e};return(await r.Z.request(s)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},c=async e=>{try{let s={method:"POST",url:"".concat(t.M6,"/").concat(t.Dy,"?_id=").concat(e._id),data:e.formData};return(await r.Z.request(s)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},o=async e=>{try{let s=e.page||1,n=e.limit||10,a=e.filter||"",c=e.created_by,o=e.sortBy,l=e.sortOrder,d=e.published;"published"===e.published?d=!0:"unpublished"===e.published?d=!1:"all"===e.published&&(d=void 0);let i={method:"GET",url:"".concat(t.M6,"/").concat(t.it,"?filter=").concat(a,"&page=").concat(s,"&limit=").concat(n,"&sortBy=").concat(o,"&sortOrder=").concat(l,"&published=").concat(d,"&created_by=").concat(c)},u=await r.Z.request(i);return console.log(u),u.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},l=async e=>{try{let s={method:"GET",url:"".concat(t.M6,"/").concat(t.A5,"?_id=").concat(e._id)},n=await r.Z.request(s);return console.log(n),n.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},d=async e=>{try{let s={method:"POST",url:"".concat(t.M6,"/").concat(t.dt),data:e},n=await r.Z.request(s);return console.log(n),n.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}}},1633:function(e,s,n){"use strict";n.d(s,{A5:function(){return d},Dy:function(){return l},M6:function(){return t},SR:function(){return a},TK:function(){return o},Tp:function(){return r},Tv:function(){return c},dt:function(){return i},it:function(){return u},rO:function(){return m}});let t="https://survey-3uf0.onrender.com",r="api/user/getUser",a="api/user/getAllUsers",c="api/user/addUsers",o="api/survey/saveSurvey",l="api/survey/updateSurvey",d="api/survey/getSurvey",i="api/survey/deleteSurvey",u="api/survey/getAllSurveys",m=["Contact Form","Address"]}},function(e){e.O(0,[164,236,726,343,971,23,744],function(){return e(e.s=466)}),_N_E=e.O()}]);