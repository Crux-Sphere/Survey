(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7135],{20067:function(){},72061:function(){},16133:function(e,t,s){Promise.resolve().then(s.bind(s,5230))},5230:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var r=s(57437),n=s(2265),l=s(824),a=s(85260),c=s(76965),o=s(72012);let i=()=>{let e=(0,n.useContext)(o.Z);if(!e)throw Error("useCreateSurveyContext must be used within a CreateSurveyContextProvider");return e};var u=s(16463),d=s(60274),p=s(94962),x=s(80106),m=function(e){let{modalIsOpen:t,closeModal:s,setUpdated:o}=e,{ac_list:m,addAcEntry:h,name:f,removeAcEntry:y,setName:b}=i(),[g,v]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,C]=(0,n.useState)(!1),S=(0,u.useRouter)(),_=async()=>{let e={name:f};m.length>0&&(e.ac_list=m.map(e=>({ac_no:e.ac_no,booth_numbers:e.booth_numbers.split(",").map(e=>e.trim())})));try{C(!0);let t=await (0,d.Vb)(e);t.success&&(p.ZP.success("Survey created successfully!"),console.log("survey--------",t),s(),o(e=>!e),S.push("/admin/surveys/edit?survey_id=".concat(t.survey._id)))}catch(e){console.log("error in creating survey ---=-=-=->",e),p.ZP.error("Something went wrong while creating the survey.")}finally{C(!1)}};return(0,r.jsxs)(a.Z,{open:t,closeModal:s,children:[w&&(0,r.jsx)(x.Z,{}),(0,r.jsxs)("div",{className:"relative w-[50vw] min-h-[60vh] max-h-[90vh] overflow-y-auto vertical-scrollbar-orange flex flex-col items-center",children:[(0,r.jsx)("div",{className:"sticky top-0 left-0 z-10 text-primary-300 px-8 py-4 text-[24px] bg-white font-bold border-b w-full",children:"Create surveys"}),(0,r.jsxs)("div",{className:"flex p-4 gap-5 justify-center w-full h-full",children:[(0,r.jsx)("img",{src:"/images/create-survey.png",className:"w-[300px] h-[223px]"}),(0,r.jsxs)("form",{className:"grid grid-cols-4 gap-5 w-full h-fit place-items-center",children:[(0,r.jsx)("input",{onChange:e=>b(e.target.value),value:f,className:"col-span-4 flex items-center border border-secondary-200 rounded-[20px] px-8 py-4 h-full w-full focus:ring-2 focus:ring-primary-50 outline-none",type:"text",placeholder:"Survey name"}),(0,r.jsx)("input",{onChange:e=>v(e.target.value),value:g,className:"col-span-4 flex items-center border border-secondary-200 rounded-[20px] px-8 py-4 h-full w-full focus:ring-2 focus:ring-primary-50 outline-none",type:"text",placeholder:"AC_NO"}),(0,r.jsx)("input",{onChange:e=>N(e.target.value),value:j,className:"col-span-4 flex items-center border border-secondary-200 rounded-[20px] px-8 py-4 h-full w-full focus:ring-2 focus:ring-primary-50 outline-none",type:"text",placeholder:"BOOTH_NO (comma-separated)"})]})]}),(0,r.jsx)("div",{className:"w-full px-4",children:m.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"text-primary-300 font-bold",children:["AC_NO: ",e.ac_no]}),(0,r.jsxs)("span",{children:["Booth Numbers: ",e.booth_numbers]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>y(t),className:"text-red-500 font-semibold",children:"Remove"})]},t))}),(0,r.jsxs)("div",{className:"sticky bottom-0 ri justify-end p-4 flex items-center gap-10 z-20 bg-white w-full",children:[(0,r.jsx)(l.Z,{onClick:s,type:"button",className:"border-secondary-200",children:"Cancel"}),(0,r.jsx)(c.Z,{type:"button",onClick:()=>{v(""),N(""),h(g,j)},className:"col-span-4 px-4 py-2 bg-primary-300 text-white rounded-md",children:"Add AC_NO"}),(0,r.jsx)(c.Z,{disabled:!f,className:"px-6 py-2 bg-primary-300 text-white rounded-md disabled:bg-primary-100 disabled:cursor-not-allowed",type:"button",onClick:_,children:"Create Survey"})]})]})]})};s(60152);var h=s(27800),f=s(95650),y=function(e){let{importModalOpen:t,closeImportModal:s}=e,[c,o]=(0,n.useState)(""),[i,u]=(0,n.useState)(""),[d,p]=(0,n.useState)(""),[x,m]=(0,n.useState)(null),[y,b]=(0,n.useState)([]);(0,n.useEffect)(()=>{m((0,f.a_)())},[]);let g=(0,n.useRef)(null),v=async e=>{var t;e.preventDefault();let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){let e;let t=new FileReader;t.onload=async t=>{var s;let r=new Uint8Array(null===(s=t.target)||void 0===s?void 0:s.result),n=h.ij(r,{type:"array"}),l=n.SheetNames[0],a=n.Sheets[l];console.log("json data iis ------->",e=h.P6.sheet_to_json(a));let c=[],o={};e.forEach(e=>{let t="".concat(e.AC_NO,"-").concat(e.SECTION_NO);o[t]||(o[t]=!0,c.push({AC_NO:e.AC_NO,SECTION_NO:e.SECTION_NO}))}),console.log("unique pairs ---->",c);let i={};c.forEach(e=>{i[e.AC_NO]||(i[e.AC_NO]=[]),i[e.AC_NO]=[...i[e.AC_NO],e.SECTION_NO]}),console.log("ac_object is --->",i),b(e)},t.readAsArrayBuffer(s)}};return(0,r.jsx)(a.Z,{open:t,closeModal:s,children:(0,r.jsxs)("div",{className:"min-w-[600px] h-[400px] flex flex-col justify-center items-center",children:[(0,r.jsx)("div",{className:"relative z-10 text-primary-300 px-8 py-4 text-[24px] font-bold border-b w-full",children:"Import survey"}),(0,r.jsxs)("div",{className:"flex w-full h-full p-4",children:[(0,r.jsx)("img",{src:"/images/create-survey.png",className:"w-[300px] h-[223px]"}),(0,r.jsxs)("form",{className:"grid grid-cols-2 h-full w-full place-items-center",children:[(0,r.jsx)("label",{className:"h-full w-full flex justify-center items-center",children:"Name"}),(0,r.jsx)("input",{onChange:e=>p(e.target.value),value:d,className:"flex items-center border border-secondary-200 rounded-md px-8 py-3 h-3/4 w-full focus:ring-1 focus:ring-blue-200 outline-none",type:"text",placeholder:"Survey name"}),(0,r.jsx)("label",{className:"h-full w-full flex justify-center items-center",children:"AC_NO"}),(0,r.jsx)("input",{onChange:e=>o(e.target.value),value:c,className:"flex items-center border border-secondary-200 rounded-md px-8 py-3 h-3/4 w-full focus:ring-1 focus:ring-blue-200 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",type:"text",placeholder:"AC_NO"}),(0,r.jsx)("label",{className:"h-full w-full flex justify-center items-center",children:"BOOTH_NO"}),(0,r.jsx)("input",{onChange:e=>u(e.target.value),value:i,className:"flex items-center border border-secondary-200 rounded-md px-8 py-3 h-3/4 w-full focus:ring-1 focus:ring-blue-200 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",type:"text",placeholder:"BOOTH_NO"}),(0,r.jsxs)("div",{className:"flex items-center gap-10 col-start-2",children:[(0,r.jsx)(l.Z,{onClick:s,type:"button",className:"border-secondary-200",children:"Cancel"}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{ref:g,type:"file",accept:".xlsx, .xls",onChange:v,className:"hidden"}),(0,r.jsx)("button",{type:"button",onClick:()=>{g.current&&g.current.click()},disabled:!d||!c||!i,className:"px-6 py-2 bg-primary-300 text-white rounded-md disabled:bg-primary-100 disabled:cursor-not-allowed",children:"Import questions"})]})]})]})]})]})})},b=s(69824),g=s(50731),v=function(e){let{setUpdated:t}=e,[s,l]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),{setName:u,setAcList:d}=i();return(0,r.jsxs)("header",{className:"top-0 left-0 z-20 w-full h-16",children:[(0,r.jsxs)("div",{className:"h-16 w-full py-3 px-8 flex justify-between ",children:[(0,r.jsx)("h3",{className:"text-secondary-300 text-2xl",children:"Surveys"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(c.Z,{onClick:()=>l(!0),className:" font-semibold gap-2",children:[" ",(0,r.jsx)("p",{className:"text-2xl",children:(0,r.jsx)(b.S$f,{})})," ",(0,r.jsx)("p",{children:"Create survey"})]}),(0,r.jsxs)(c.Z,{onClick:()=>o(!0),className:"flex gap-2 items-center  font-semibold",children:[(0,r.jsx)(g.o5r,{className:"text-2xl"}),(0,r.jsx)("p",{children:"Import survey"})]})]})]}),(0,r.jsx)(m,{setUpdated:t,modalIsOpen:s,closeModal:()=>{u(""),d([]),l(!1)}}),(0,r.jsx)(y,{importModalOpen:a,closeImportModal:()=>o(!1)})]})},j=s(31894),N=s(66648),w=s(23484),C=s(17042);let S={page:1,limit:10,sortBy:"createdAt",sortOrder:"desc",published:"all",created_by:"rohitchand490@gmail.com",filter:""};var _=function(){let[e,t]=(0,n.useState)(S),[s,l]=(0,n.useState)(""),[a,o]=(0,n.useState)("all"),[i,u]=(0,n.useState)("dateDesc"),[d,p]=(0,n.useState)(!1),x=(0,C.Z)(),m=null==x?void 0:x.role.map(e=>e.name).includes("Survey Manager");return(0,n.useEffect)(()=>{},[e]),(0,r.jsxs)("section",{className:" bg-[#ECF0FA] min-h-[calc(100vh-80px)] w-full flex flex-col",children:[!m&&(0,r.jsx)(v,{setUpdated:p}),(0,r.jsx)("div",{className:"p-3 text-sm text-my-gray-200 bg-white mx-5 rounded-xl my-2",children:(0,r.jsxs)("div",{className:"flex gap-10 justify-between items-center",children:[(0,r.jsx)("input",{className:"w-[387px] h-[42.5px] px-4 py-[10px] border border-secondary-200 rounded-md focus:outline-none text-[14px] text-secondary-300",placeholder:"Search Surveys here",value:s,onChange:e=>l(e.target.value)}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex  h-10 items-center space-x-1 text-secondary-300 font-semibold text-[14px] whitespace-nowrap",children:[(0,r.jsx)("p",{children:"Filter By:"}),(0,r.jsx)("div",{className:"rounded-md py-2 px-2 justify-between border border-secondary-200 bg-white",children:(0,r.jsxs)("select",{name:"filterby",className:"w-fit bg-white  focus:outline-none px-2",id:"filterby",value:a,onChange:e=>o(e.target.value),children:[(0,r.jsx)("option",{value:"all",children:"All"}),(0,r.jsx)("option",{value:"published",children:"Published"}),(0,r.jsx)("option",{value:"unpublished",children:"Unpublished"})]})})]}),(0,r.jsxs)("div",{className:"flex h-10 items-center space-x-1 mr-8 text-secondary-300 font-semibold text-[14px] whitespace-nowrap",children:[(0,r.jsx)("p",{className:"",children:"Sort By:"}),(0,r.jsx)("div",{className:"rounded-md py-2 px-2 justify-between border border-secondary-200 bg-white",children:(0,r.jsxs)("select",{name:"sortby",className:"w-fit bg-white focus:outline-none px-2",id:"sortby",value:i,onChange:e=>u(e.target.value),children:[(0,r.jsx)("option",{value:"nameAsc",children:"Name ASC"}),(0,r.jsx)("option",{value:"nameDesc",children:"Name DESC"}),(0,r.jsx)("option",{value:"dateDesc",children:"Date DESC"}),(0,r.jsx)("option",{value:"dateAsc",children:"Date ASC"})]})})]}),(0,r.jsxs)(c.Z,{className:"text-[14px] font-semibold flex gap-2 items-center justify-center",onClick:()=>{t(e=>({...e,filter:s,published:a,sortBy:i.includes("name")?"name":"createdAt",sortOrder:i.includes("Asc")?"asc":"desc",page:1}))},children:[(0,r.jsx)(N.default,{src:j.Z.src,alt:"filter icon",height:20,width:20}),(0,r.jsx)("p",{className:"whitespace-nowrap",children:"Apply filters"})]}),(0,r.jsx)(c.Z,{className:"text-[14px] font-semibold flex gap-2 items-center justify-center bg-dark-gray",onClick:()=>{l(""),o("all"),u("dateDesc"),t(()=>S)},children:(0,r.jsx)("p",{className:"whitespace-nowrap",children:"Clear Filters"})})]})]})}),(0,r.jsx)(w.Z,{updated:d,setQueryParams:e=>t(t=>({...t,...e})),queryParams:e})]})}},824:function(e,t,s){"use strict";var r=s(57437);s(2265);var n=s(96164);t.Z=function(e){let{children:t,className:s,...l}=e;return(0,r.jsx)("button",{...l,className:(0,n.m6)("border border-primary-300 px-4 py-2 rounded-[20px] text-primary-300 hover:text-white hover:bg-primary-300",s),children:t})}},60152:function(e,t,s){"use strict";s.d(t,{Bu:function(){return i},K7:function(){return c},Pt:function(){return l},kz:function(){return o},sD:function(){return a}});var r=s(1633),n=s(38472);let l=async e=>{try{let t={method:"POST",url:"".concat(r.M6,"/").concat(r.vx),data:e},s=await n.Z.request(t);return console.log(s),s.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},a=async e=>{try{let t={method:"GET",url:"".concat(r.M6,"/").concat(r.HA),params:e};return(await n.Z.request(t)).data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},c=async e=>{try{let t={method:"GET",url:"".concat(r.M6,"/").concat(r.jC),params:e},s=await n.Z.request(t);return console.log("response --->",s),s.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},o=async e=>{try{let t={method:"GET",url:"".concat(r.M6,"/").concat(r.jC),params:e,responseType:"blob"},s=await n.Z.request(t);return console.log("response --->",s),s}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}},i=async e=>{try{let t={method:"POST",url:"".concat(r.M6,"/").concat(r.L5),data:e},s=await n.Z.request(t);return console.log("response --->",s),s.data}catch(e){return{success:!1,message:"Something Went Wrong",error:e}}}},72012:function(e,t,s){"use strict";s.d(t,{r:function(){return a}});var r=s(57437),n=s(2265);let l=(0,n.createContext)(void 0);function a(e){let{children:t}=e,[s,a]=(0,n.useState)(""),[c,o]=(0,n.useState)([]);return(0,r.jsx)(l.Provider,{value:{name:s,ac_list:c,setName:a,addAcEntry:(e,t)=>{o(s=>[...s,{ac_no:e,booth_numbers:t}])},removeAcEntry:e=>{o(t=>t.filter((t,s)=>s!==e))},setAcList:o},children:t})}t.Z=l}},function(e){e.O(0,[5452,7699,6051,1779,1425,1694,8472,4962,9413,1181,4049,4231,2971,7023,1744],function(){return e(e.s=16133)}),_N_E=e.O()}]);