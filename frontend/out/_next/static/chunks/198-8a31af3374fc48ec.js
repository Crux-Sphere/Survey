"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{82744:function(e,s,l){var r=l(57437),t=l(77744);l(2265);var n=l(85260);s.Z=function(e){let{mapModalIsOpen:s,isLoaded:l,setMapModalIsOpen:a}=e;return(0,r.jsx)(n.Z,{open:s,closeModal:()=>a(!1),children:(0,r.jsx)("div",{className:"p-4 h-[60vh] flex justify-center items-center w-[50vw]",children:(0,r.jsx)("div",{className:"flex h-full w-full justify-center items-center flex-col gap-4",children:l?(0,r.jsx)(t.b6,{mapContainerStyle:{width:"400px",height:"400px"},center:{lat:-3.745,lng:-38.523},zoom:10,onLoad:e=>{console.log("gmap--->",e);let s=new window.google.maps.LatLngBounds;e.fitBounds(s)},onUnmount:e=>{},children:(0,r.jsx)(r.Fragment,{})}):(0,r.jsx)(r.Fragment,{})})})})}},95673:function(e,s,l){var r=l(57437),t=l(2265),n=l(85260),a=l(22221),i=l(95650);s.Z=function(e){var s;let{selectedResponse:l,users:c,setResponseModalIsOpen:d,responseModalIsOpen:o}=e,[m,p]=(0,t.useState)(!1),x=(null==l?void 0:l.remark_list)&&l.remark_list.length>0?m?[...l.remark_list].reverse():[...l.remark_list].reverse().slice(0,2):[];return(0,r.jsx)(n.Z,{open:o,closeModal:()=>d(!1),children:l&&(0,r.jsx)("div",{className:"p-4 h-[80vh] flex justify-center items-center w-[60vw]",children:(0,r.jsxs)("div",{className:"flex h-full w-full justify-center items-center flex-col gap-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full",children:[(0,r.jsx)("h2",{className:"w-full h-full text-center text-xl font-semibold border-b-2 pb-2",children:"Question"}),(0,r.jsx)("p",{className:"w-full h-full text-center text-xl font-semibold border-b-2 pb-2",children:"Response"})]}),(0,r.jsxs)("div",{className:"flex h-full w-full flex-col overflow-y-auto vertical-scrollbar",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full",children:[(0,r.jsx)("p",{className:"py-4 bg-primary-50 w-full h-full text-center font-medium",children:"Status"}),(0,r.jsx)("p",{className:"py-4 bg-primary-50 w-full h-full flex justify-center font-medium",children:l.contacted?(0,r.jsx)("p",{className:"bg-green-200 p-2 rounded-md w-fit",children:"Completed"}):(0,r.jsx)("p",{children:"Pending"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full",children:[(0,r.jsx)("p",{className:"py-4 bg-primary-100 w-full h-full text-center font-medium",children:"Remark"}),(0,r.jsx)("div",{className:"grid grid-cols-2 py-4 bg-primary-100 w-full text-center h-full font-medium",children:l.remark_list&&l.remark_list.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"font-semibold",children:["Report:"," "]}),(0,r.jsx)("p",{className:"font-normal ml-2",children:l.remark_list[l.remark_list.length-1].remark}),(0,r.jsxs)("p",{className:"font-semibold",children:["Date:"," "]}),(0,r.jsx)("p",{className:"font-normal ml-2",children:(0,i.p6)(l.remark_list[l.remark_list.length-1].date)}),(0,r.jsxs)("p",{className:"font-semibold",children:["Time:"," "]}),(0,r.jsx)("p",{className:"font-normal ml-2",children:(0,i.mr)(l.remark_list[l.remark_list.length-1].date)})]}):"---"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full bg-primary-50",children:[(0,r.jsx)("h2",{className:"font-medium py-4 text-center",children:"Remark History"}),l.remark_list&&l.remark_list.length>0?(0,r.jsxs)("div",{className:"p-4 flex flex-col items-center ",children:[x.map((e,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full py-2 border-b last:border-b-0",children:[(0,r.jsx)("p",{className:"font-medium text-primary-700",children:e.remark}),(0,r.jsx)("p",{className:"text-xs text-gray-600 text-end",children:"".concat((0,i.p6)(e.date)," at ").concat((0,i.mr)(e.date))})]},s)),l.remark_list.length>2&&(0,r.jsx)("button",{onClick:()=>{p(e=>!e)},className:"mt-4 text-sm font-medium hover:text-gray-500",children:m?"Show Less":"Show More"})]}):(0,r.jsx)("p",{className:"text-center",children:"No remarks available."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full",children:[(0,r.jsx)("h2",{className:"py-4 bg-primary-100 w-full h-full text-center font-medium",children:"Response by"}),(0,r.jsx)("p",{className:"py-4 bg-primary-100 w-full h-full text-center font-medium",children:(null===(s=c.find(e=>e._id===l.user_id))||void 0===s?void 0:s.name)||"-"})]}),l.responses.map((e,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-2 w-full",children:[(0,r.jsx)("h2",{className:"w-full py-4 h-full text-center ".concat(s%2==0?"bg-primary-50":"bg-primary-100"),children:e.question}),(0,r.jsx)("p",{className:"w-full py-4 h-full flex justify-center items-center ".concat(s%2==0?"bg-primary-50":"bg-primary-100"),children:(0,r.jsx)(a.Z,{questionType:e.question_type,response:e.response,expand:!0})})]},s))]})]})})})}},64785:function(e,s,l){var r=l(57437),t=l(95650),n=l(2265),a=l(41942),i=l(63872),c=l(76965),d=l(88726),o=l(84298),m=l(16463),p=l(22221);s.Z=function(e){let{responses:s,users:l,assignMode:x,setSelectedResponse:u,setResponseModalIsOpen:h,setMapModalIsOpen:f,setMore:b,more:j,setAssignedMode:g,selectedPanna:w,getUserResponses:N,setSelectedPanna:y}=e;console.log("all responses /////////////// ",s);let[k,_]=(0,n.useState)(null),[v,q]=(0,n.useState)(null),[C,Z]=(0,n.useState)([]),S=(0,m.useSearchParams)().get("survey_id");async function P(){let e=await (0,o.qq)({id:w,responses:C,surveyId:S});console.log("after updation ----->",e),e.success?(d.ZP.success("Data assigned successfully"),g(!1),Z([]),y(null),N()):(console.log("error response --->",e),d.ZP.error(e.message))}return console.log("selectedResponses are from outside --->",C),(0,r.jsxs)("div",{id:"scrollableDiv",className:"w-[96%] mx-auto max-h-[80vh] overflow-auto  scrollbar rounded-t-2xl border border-secondary-200",children:[(0,r.jsxs)("table",{className:"w-full table-auto",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsxs)("tr",{className:"bg-dark-gray text-white sticky top-0",children:[(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center"}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center"}),x&&(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b min-w-32 whitespace-nowrap text-center font-semibold",children:"Panna pramukh"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b min-w-32 whitespace-nowrap text-center font-semibold",children:"Status"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b min-w-32 whitespace-nowrap text-center font-semibold",children:"Remark"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b min-w-32 whitespace-nowrap text-center font-semibold",children:"Response date"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b min-w-32 whitespace-nowrap text-center font-semibold",children:"User"}),s&&s.length>0&&s[0].responses.map((e,s)=>(0,r.jsxs)("td",{className:"gap-2 font-semibold px-4 py-2 border-b min-w-32 whitespace-nowrap text-center",children:[j!==e.question_id?(0,t.aF)(e.question,10):e.question,(0,r.jsx)("button",{className:"text-primary-300 text-sm ml-2",onClick:()=>b(e.question_id),children:j!==e.question_id&&e.question.length>10?"More":""}),(0,r.jsx)("button",{className:"text-primary-300 text-sm ml-2",onClick:()=>b(null),children:j===e.question_id&&e.question.length>10?"Less":""})]},s))]})}),(0,r.jsx)("tbody",{className:"bg-white",children:s&&s.map((e,n)=>{var o;return(0,r.jsxs)("tr",{onClick:()=>{u(e),h(!0)},className:"cursor-pointer",children:[x&&(0,r.jsx)("td",{onClick:e=>e.stopPropagation(),className:"min-w-32 px-4 py-2 border-b text-center",children:(0,r.jsx)("input",{disabled:e.panna_pramukh_assigned,onChange:()=>(function(e,l){if(null===k)_(l),Z([e]);else{if(l===k){_(null),q(null),Z([]);return}if(l<k){_(l),q(null),Z([e]);return}if(l>k){if(q(l),Math.abs(l-k)+1>60){d.ZP.error("Maximum of 60 responses are allowed");return}console.log("all responses are ------>",s);let e=[];for(let r=k;r<=l;r++)s[r].panna_pramukh_assigned||e.push(s[r]._id);Z(e)}if(null!==v&&l<v){q(l);let e=[];for(let r=k;r<=l;r++)e.push(s[r]._id);Z(e)}}})(e._id,n),checked:C.includes(e._id),className:"h-5 w-5",type:"checkbox"})}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center",children:(0,r.jsx)(c.Z,{className:"w-10 p-0 flex justify-center items-center rounded-full h-10",onClick:e=>{e.stopPropagation(),f(!0)},children:(0,r.jsx)(i.GUT,{})})}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center",children:(0,r.jsx)(a.dSq,{})}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center",children:e.panna_pramukh_assigned?e.panna_pramukh_assigned.name:"--"}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center",children:e.contacted?(0,r.jsx)("p",{className:"w-full p-2 bg-green-200 rounded-md",children:"Complete"}):e.panna_pramukh_assigned?(0,r.jsx)("p",{className:"w-full p-2 bg-amber-300 rounded-md",children:"Pending"}):"---"}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center",children:e.remark?(0,t.aF)(e.remark,15):"---"}),(0,r.jsx)("td",{className:"min-w-32 px-4 py-2 border-b text-center",children:(0,t.p6)(e.createdAt)}),(0,r.jsx)("td",{className:"min-w-44 whitespace-nowrap px-4 py-2 border-b text-center",children:(null===(o=l.find(s=>s._id===e.user_id))||void 0===o?void 0:o.name)||"-"}),e.responses.map((e,s)=>(0,r.jsx)(p.Z,{expand:!1,questionType:e.question_type,response:e.response}))]},n)})})]}),x&&(0,r.jsxs)("div",{className:"flex gap-2 mt-5 ml-3 sticky bottom-0 bg-white left-3",children:[(0,r.jsx)(c.Z,{onClick:()=>{P()},children:"Assign"}),(0,r.jsx)(c.Z,{onClick:()=>{g(!1),Z([]),_(null),q(null)},children:"Cancel"})]})]})}}}]);